{{ define "main" }}
<!-- Reading Progress Bar -->
<div id="progress-bar" class="fixed top-0 left-0 h-1 bg-twitter z-[100] transition-all duration-150 w-0"></div>

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 animate-in fade-in slide-in-from-bottom-8 duration-700">
    
    <!-- Top Meta -->
    <div class="flex items-center justify-between mb-12">
        <a href="/journal/" class="inline-flex items-center text-xs font-black uppercase tracking-widest text-slate-400 hover:text-twitter transition-colors group">
            <svg class="w-4 h-4 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Journal
        </a>
        <div class="flex items-center gap-2">
            {{ range .Params.categories }}
            <span class="px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-[10px] font-black uppercase rounded-full border border-slate-200 dark:border-slate-700 tracking-tighter">{{ . }}</span>
            {{ end }}
        </div>
    </div>

    <!-- Article Header -->
    <header class="space-y-8 mb-16">
        <div class="space-y-4">
            <h1 class="text-4xl md:text-6xl font-black tracking-tighter text-slate-900 dark:text-white leading-[1.1]">
                {{ .Title }}
            </h1>
            <p class="text-xl text-slate-500 dark:text-slate-400 font-medium leading-relaxed max-w-2xl italic">
                {{ .Summary }}
            </p>
        </div>

        <div class="flex items-center gap-6 pt-4 border-t border-slate-100 dark:border-slate-800">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden ring-2 ring-white dark:ring-slate-800 shadow-md">
                    <img src="{{ .Site.Params.avatar }}" alt="Avatar" class="w-full h-full object-cover">
                </div>
                <div class="text-sm">
                    <p class="font-black text-slate-900 dark:text-white leading-none mb-1">{{ .Site.Params.hero.name }}</p>
                    <p class="text-slate-400 uppercase text-[9px] font-bold tracking-widest">{{ .Date.Format "Jan 02, 2006" }}</p>
                </div>
            </div>
            <div class="h-8 w-[1px] bg-slate-100 dark:bg-slate-800"></div>
            <div class="text-xs text-slate-400 font-bold uppercase tracking-widest">
                {{ .ReadingTime }} min read
            </div>
        </div>
    </header>

    <!-- Hero Image -->
    {{ if .Params.image }}
    <div class="mb-20 -mx-4 sm:mx-0">
        <div class="aspect-[21/9] rounded-3xl overflow-hidden shadow-2xl shadow-slate-200 dark:shadow-black/50 group">
            <img src="{{ if hasPrefix .Params.image "http" }}{{ .Params.image }}{{ else }}{{ .Params.image | relURL }}{{ end }}" 
                 alt="{{ .Title }}" 
                 class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105">
        </div>
    </div>
    {{ end }}

    <!-- Article Content -->
    <article class="prose prose-slate lg:prose-xl dark:prose-invert max-w-none 
        prose-headings:text-slate-900 dark:prose-headings:text-white prose-headings:tracking-tighter prose-headings:font-black
        prose-p:text-slate-700 dark:prose-p:text-slate-300 prose-p:leading-relaxed
        prose-a:text-twitter prose-a:no-underline hover:prose-a:underline
        prose-blockquote:border-l-4 prose-blockquote:border-twitter prose-blockquote:bg-slate-50 dark:prose-blockquote:bg-slate-900/50 prose-blockquote:py-2 prose-blockquote:px-6 prose-blockquote:rounded-r-2xl prose-blockquote:font-medium prose-blockquote:italic
        prose-img:rounded-[2rem] prose-img:shadow-2xl">
        {{ .Content }}
    </article>

    <!-- Article Footer -->
    <footer class="mt-24 pt-12 border-t-2 border-slate-100 dark:border-slate-800">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-8 mb-16">
            <div class="space-y-4">
                <h4 class="text-xs font-black uppercase tracking-[0.3em] text-slate-400">Share this log</h4>
                <div class="flex items-center gap-3">
                    <button class="w-12 h-12 flex items-center justify-center rounded-2xl bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-twitter hover:bg-twitter/10 transition-all">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                    </button>
                    <button class="w-12 h-12 flex items-center justify-center rounded-2xl bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-green-500 hover:bg-green-500/10 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    </button>
                </div>
            </div>
            
            {{ if .Params.tags }}
            <div class="space-y-4 text-right">
                <h4 class="text-xs font-black uppercase tracking-[0.3em] text-slate-400">Tags</h4>
                <div class="flex flex-wrap md:justify-end gap-2">
                    {{ range .Params.tags }}
                    <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="px-4 py-1.5 bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-[10px] font-black uppercase rounded-full hover:bg-twitter hover:text-white transition-all">#{{ . }}</a>
                    {{ end }}
                </div>
            </div>
            {{ end }}
        </div>

        <!-- Post Navigation -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {{ if .PrevInSection }}
            <a href="{{ .PrevInSection.RelPermalink }}" class="group p-8 rounded-[2rem] bg-white dark:bg-slate-900 border-2 border-slate-50 dark:border-slate-800 hover:border-twitter transition-all shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Previous Entry</p>
                <h5 class="text-xl font-black text-slate-900 dark:text-white group-hover:text-twitter transition-colors">{{ .PrevInSection.Title }}</h5>
            </a>
            {{ end }}
            {{ if .NextInSection }}
            <a href="{{ .NextInSection.RelPermalink }}" class="group p-8 rounded-[2rem] bg-white dark:bg-slate-900 border-2 border-slate-50 dark:border-slate-800 hover:border-twitter transition-all shadow-sm text-right">
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Next Entry</p>
                <h5 class="text-xl font-black text-slate-900 dark:text-white group-hover:text-twitter transition-colors">{{ .NextInSection.Title }}</h5>
            </a>
            {{ end }}
        </div>
    </footer>
</div>

<script>
    window.onscroll = function() {
        let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        let scrolled = (winScroll / height) * 100;
        document.getElementById("progress-bar").style.width = scrolled + "%";
    };
</script>
{{ end }}